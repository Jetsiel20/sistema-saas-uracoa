{% extends "base.html" %}
{% block title %}Mi Perfil - {{ app_name }}{% endblock %}
{% block content %}
<div class="row">
    <div class="col-md-8 mx-auto">
        <div class="card shadow">
            <div class="card-header bg-primary text-white">
                <h4 class="mb-0"><i class="bi bi-person-circle"></i> Mi Perfil</h4>
            </div>
            <div class="card-body">
                <div class="row mb-4">
                    <div class="col-md-4 text-center">
                        <div class="mb-3">
                            <i class="bi bi-person-circle text-primary" style="font-size: 8rem;"></i>
                        </div>
                        <h5>{{ usuario.nombre_completo }}</h5>
                        <p class="text-muted">@{{ usuario.username }}</p>
                        <span class="badge bg-{{ 'danger' if usuario.rol == 'admin' else 'primary' }} fs-6">
                            {{ usuario.rol|title }}
                        </span>
                    </div>
                    
                    <div class="col-md-8">
                        <h5 class="mb-3">Información Personal</h5>
                        <table class="table table-borderless">
                            <tbody>
                                <tr>
                                    <td class="fw-bold" style="width: 40%;"><i class="bi bi-envelope"></i> Email:</td>
                                    <td>{{ usuario.email }}</td>
                                </tr>
                                <tr>
                                    <td class="fw-bold"><i class="bi bi-credit-card-2-front"></i> Cédula:</td>
                                    <td>{{ usuario.cedula }}</td>
                                </tr>
                                <tr>
                                    <td class="fw-bold"><i class="bi bi-telephone"></i> Teléfono:</td>
                                    <td>{{ usuario.telefono or 'No registrado' }}</td>
                                </tr>
                                {% if usuario.especialidad %}
                                <tr>
                                    <td class="fw-bold"><i class="bi bi-award"></i> Especialidad:</td>
                                    <td>{{ usuario.especialidad }}</td>
                                </tr>
                                {% endif %}
                                {% if usuario.codigo_profesional %}
                                <tr>
                                    <td class="fw-bold"><i class="bi bi-card-heading"></i> Código Profesional:</td>
                                    <td>{{ usuario.codigo_profesional }}</td>
                                </tr>
                                {% endif %}
                                <tr>
                                    <td class="fw-bold"><i class="bi bi-calendar-plus"></i> Registro:</td>
                                    <td>{{ usuario.fecha_registro.strftime('%d/%m/%Y %H:%M') }}</td>
                                </tr>
                                {% if usuario.ultimo_acceso %}
                                <tr>
                                    <td class="fw-bold"><i class="bi bi-clock-history"></i> Último Acceso:</td>
                                    <td>{{ usuario.ultimo_acceso.strftime('%d/%m/%Y %H:%M') }}</td>
                                </tr>
                                {% endif %}
                                <tr>
                                    <td class="fw-bold"><i class="bi bi-check-circle"></i> Estado:</td>
                                    <td>
                                        <span class="badge bg-{{ 'success' if usuario.activo else 'danger' }}">
                                            {{ 'Activo' if usuario.activo else 'Inactivo' }}
                                        </span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <hr>
                
                <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                    <a href="{{ url_for('auth.cambiar_password') }}" class="btn btn-warning">
                        <i class="bi bi-key"></i> Cambiar Contraseña
                    </a>
                    <a href="{{ url_for('main.dashboard') }}" class="btn btn-secondary">
                        <i class="bi bi-arrow-left"></i> Volver al Dashboard
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
